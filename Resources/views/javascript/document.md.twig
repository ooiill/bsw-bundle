{% block documentJavascript %}
bsw.configure({
    data: {
        indexCol: 0,
        indexColTmp: 0,
        shrink: false,
        size: null,
    },
    method: {
        documentRender(f5) {
            let theAnchor = bsw.getAnchor();
            $('.index > ul > a').removeClass('current');
            if (theAnchor.length) {
                let currentLink = $(`#index-${theAnchor}`);
                if (currentLink.length) {
                    currentLink.addClass('current');
                    if (f5) {
                        $('.markdown-content .index').scrollTop(currentLink[0].offsetTop - 5);
                    }
                }
                let currentMd = $(`#${theAnchor}`);
                if (currentMd.length) {
                    $('.markdown-content .content').scrollTop(currentMd[0].offsetTop - 12);
                }
            }
            setTimeout(() => bsw.prominentAnchor(), 50)
        },
        changeShrink() {
            this.shrink = !this.shrink;
            if (this.shrink === true) {
                this.indexColTmp = this.indexCol;
                this.indexCol = 0;
            } else {
                this.indexCol = this.indexColTmp;
            }
        },
        resize(f5 = false) {
            let w = document.body.clientWidth;
            this.size = bsw.getResponsiveInfo(w);
            this.indexCol = {xs: 24, sm: 10, md: 8, lg:7, xl:6, xxl: 5}[this.size];
            if (f5 && this.size === 'xs') {
                this.changeShrink();
            }
        },
    },
    logic: {
        documentInit(v) {
            v.resize(true);
            setTimeout(() =>  v.documentRender(true), 10);
        },
        documentListenTheAnchor(v) {
            window.onhashchange = function () {
                if (v.size === 'xs') {
                    v.changeShrink();
                    setTimeout(() => v.documentRender(false), 10);
                } else {
                    v.documentRender(false);
                }
            };
        },
        documentResize(v) {
            $(window).resize(() => v.resize());
        }
    }
});
{% endblock %}